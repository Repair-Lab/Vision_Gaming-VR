<!DOCTYPE html>
<html lang="de">
<head>
    <title>Sensor Check - VR Gaming</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/main.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f0f2f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        #orientationData { font-family: monospace; background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 4px; white-space: pre-wrap; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Sensor-Check f√ºr Vision Pro</h1>
        <p>Testen Sie die WebXR-Sensoren Ihres Ger√§ts</p>
        
        <button onclick="startTests()">üöÄ Tests starten</button>
        
        <div id="testResults"></div>
        
        <h3>Orientierungsdaten:</h3>
        <div id="orientationData">Warten auf Daten...</div>
        
        <h3>Device Orientation:</h3>
        <div id="deviceOrientation">Nicht verf√ºgbar</div>
        
        <button onclick="window.location.href='/'">‚Üê Zur√ºck zum Hauptmen√º</button>
    </div>

    <script>
        let orientationData = {};
        
        async function startTests() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = '<div class="test-result">Tests laufen...</div>';
            
            // WebXR Support testen
            if ('xr' in navigator) {
                resultsDiv.innerHTML += '<div class="test-result success">‚úÖ WebXR wird unterst√ºtzt</div>';
            } else {
                resultsDiv.innerHTML += '<div class="test-result error">‚ùå WebXR wird nicht unterst√ºtzt</div>';
            }
            
            // Device Orientation testen
            if ('DeviceOrientationEvent' in window) {
                resultsDiv.innerHTML += '<div class="test-result success">‚úÖ Device Orientation verf√ºgbar</div>';
            } else {
                resultsDiv.innerHTML += '<div class="test-result error">‚ùå Device Orientation nicht verf√ºgbar</div>';
            }
            
            // HTTPS testen (f√ºr WebXR erforderlich)
            if (location.protocol === 'https:' || location.hostname === 'localhost') {
                resultsDiv.innerHTML += '<div class="test-result success">‚úÖ HTTPS oder localhost</div>';
            } else {
                resultsDiv.innerHTML += '<div class="test-result error">‚ùå HTTPS erforderlich f√ºr WebXR</div>';
            }
        }
        
        // Device Orientation Events
        window.addEventListener('deviceorientation', (event) => {
            orientationData = {
                alpha: event.alpha,
                beta: event.beta,
                gamma: event.gamma,
                timestamp: Date.now()
            };
            
            document.getElementById('orientationData').textContent = 
                `Alpha: ${orientationData.alpha?.toFixed(2)}¬∞\n` +
                `Beta: ${orientationData.beta?.toFixed(2)}¬∞\n` +
                `Gamma: ${orientationData.gamma?.toFixed(2)}¬∞\n` +
                `Timestamp: ${orientationData.timestamp}`;
        });
        
        // WebXR Device Orientation
        if ('xr' in navigator) {
            navigator.xr.isSessionSupported('immersive-vr').then((supported) => {
                const resultsDiv = document.getElementById('testResults');
                if (supported) {
                    resultsDiv.innerHTML += '<div class="test-result success">‚úÖ Immersive VR Session unterst√ºtzt</div>';
                } else {
                    resultsDiv.innerHTML += '<div class="test-result error">‚ùå Immersive VR Session nicht unterst√ºtzt</div>';
                }
            });
        }
        
        window.onload = startTests;
    </script>
</body>
</html>
